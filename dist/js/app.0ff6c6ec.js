(function(){"use strict";var e={785:function(e,s,t){var o=t(963),a=t(252);function n(e,s,t,o,n,r){const i=(0,a.up)("router-view"),l=(0,a.up)("v-main"),u=(0,a.up)("footer-component"),c=(0,a.up)("v-app");return(0,a.wg)(),(0,a.j4)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(l,{class:"main-home"},{default:(0,a.w5)((()=>[(0,a.Wm)(i)])),_:1}),(0,a.Wm)(u)])),_:1})}var r=t(577);const i=e=>((0,a.dD)("data-v-4fcd1831"),e=e(),(0,a.Cn)(),e),l=i((()=>(0,a._)("strong",null,"Vuetify",-1)));function u(e,s,t,o,n,i){const u=(0,a.up)("v-btn"),c=(0,a.up)("v-col"),d=(0,a.up)("v-row"),m=(0,a.up)("v-footer");return(0,a.wg)(),(0,a.j4)(m,{class:"bg-grey-lighten-1"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{justify:"center","no-gutters":""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.links,(e=>((0,a.wg)(),(0,a.j4)(u,{key:e,color:"white",variant:"text",class:"mx-2",rounded:"xl"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)(e),1)])),_:2},1024)))),128)),(0,a.Wm)(c,{class:"text-center mt-4",cols:"12"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,r.zw)((new Date).getFullYear())+" — ",1),l])),_:1})])),_:1})])),_:1})}var c={name:"FooterComponent",data:()=>({links:["Home","About Us","Team","Services","Blog","Contact Us"]})},d=t(744);const m=(0,d.Z)(c,[["render",u],["__scopeId","data-v-4fcd1831"]]);var p=m,g={components:{FooterComponent:p}};const v=(0,d.Z)(g,[["render",n]]);var f=v,_=t(201),h=t.p+"img/logo-only.c4dddedd.svg";const w={class:"home"},k={class:"hero"},b={class:"hero-body"},y={class:"container"},D={class:"title"},C=(0,a._)("img",{src:h,alt:"logo groupomania",class:"resize_logo"},null,-1),S=(0,a._)("h2",{class:"subtitle"},"Entre nous, c'est entre vous...",-1),U={class:"flex is-centered home_display"},I={class:"button-block"},z={class:"button-block"},$={class:"component-container"};function q(e,s,t,o,n,i){return(0,a.wg)(),(0,a.iD)("div",w,[(0,a._)("section",k,[(0,a._)("div",b,[(0,a._)("div",y,[(0,a._)("h1",D,[C,(0,a.Uk)(" "+(0,r.zw)(e.societyName),1)]),S,(0,a._)("div",U,[(0,a._)("div",I,[(0,a._)("button",{onClick:s[0]||(s[0]=(...e)=>i.goToSignup&&i.goToSignup(...e)),class:"button is-xl is-dark"}," Inscrivez-vous ")]),(0,a._)("div",z,[(0,a._)("button",{onClick:s[1]||(s[1]=(...e)=>i.goToLogin&&i.goToLogin(...e)),class:"button is-xl is-dark"}," Se connecter ")])])])])]),(0,a._)("div",$,[((0,a.wg)(),(0,a.j4)((0,a.LL)(n.currentComponent)))])])}var P=t(907);const E=(0,a._)("h1",{class:"title is-2"},"Inscription",-1),A={class:"field"},H=(0,a._)("label",{for:"name",class:"label"},"Nom",-1),N={class:"control has-icons-left"},V=(0,a._)("span",{class:"icon is-small is-left"},[(0,a._)("i",{class:"fas fa-user"})],-1),j={class:"icon is-small is-right"},B={key:0,class:"valid_input fas fa-check"},F={key:1,class:"wrong_input fas fa-times"},L={key:0,class:"error_msg"},T={key:0},W=(0,a._)("i",{class:"fas fa-exclamation-triangle"},[(0,a._)("em",null,"Le champ nom est requis")],-1),O=[W],M={key:1},Z=(0,a._)("i",{class:"fas fa-exclamation-triangle"},[(0,a._)("em",null,"Le nom d'utilisateur doit contenir au moins 3 caractères")],-1),x=[Z],Y={class:"field"},K=(0,a._)("label",{for:"password",class:"label"},"Mot de passe",-1),G={class:"control has-icons-left"},J=(0,a._)("span",{class:"icon is-small is-left"},[(0,a._)("i",{class:"fas fa-key"})],-1),R={class:"icon is-small is-right"},X={key:0,class:"valid_input fas fa-check"},Q={key:1,class:"wrong_input fas fa-times"},ee={key:0,class:"error_msg"},se={key:0},te=(0,a._)("i",{class:"fas fa-exclamation-triangle"},"La saisie du mot de passe est obligatoire",-1),oe=[te],ae={key:1},ne=(0,a._)("i",{class:"fas fa-exclamation-triangle"},[(0,a._)("em",null,"Le mot de passe doit contenir au moins 8 caractères")],-1),re=[ne],ie={class:"field"},le=(0,a._)("label",{for:"email",class:"label"},"Adresse électronique",-1),ue={class:"control has-icons-left has-icons-right"},ce=(0,a.uE)('<span class="icon is-small is-left"><i class="fas fa-envelope"></i></span><span class="icon is-small is-right"><i class="fas fa-check" id="validMail"></i><i class="fas fa-times" id="wrongMail"></i></span>',2),de={key:0,class:"mail_Warning"},me={key:0},pe=(0,a._)("i",{class:"fas fa-exclamation-triangle"},"Le champ email est requis",-1),ge=[pe],ve={key:1},fe=(0,a._)("i",{class:"fas fa-exclamation-triangle"},"Veuillez renseigner une adresse email valide !",-1),_e=[fe],he=(0,a.uE)('<div class="field flex is-centered"><div class="control"><button class="button is-link">Soumettre</button></div><div class="control"><button class="button high_contrast"><a href="/">Annuler</a></button></div></div>',1),we={class:"already-signed"};function ke(e,s,t,n,r,i){const l=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("form",{onSubmit:s[6]||(s[6]=(0,o.iM)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"])),class:"form"},[E,(0,a._)("div",A,[H,(0,a._)("div",N,[(0,a.wy)((0,a._)("input",{class:"input",type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.userForm.username=e),id:"name",name:"name",placeholder:"Veuillez saisir votre nom d'utilisateur",onInput:s[1]||(s[1]=()=>n.checkInput("username"))},null,544),[[o.nr,n.userForm.username]]),V,(0,a._)("span",j,[n.usernameInputValid?((0,a.wg)(),(0,a.iD)("i",B)):((0,a.wg)(),(0,a.iD)("i",F))])]),n.submitted&&n.v$.username.$error?((0,a.wg)(),(0,a.iD)("div",L,[n.userForm.username.required?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",T,O)),n.v$.username.minLength?((0,a.wg)(),(0,a.iD)("span",M,x)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),(0,a._)("div",Y,[K,(0,a._)("div",G,[(0,a.wy)((0,a._)("input",{class:"input",type:"password","onUpdate:modelValue":s[2]||(s[2]=e=>n.userForm.password=e),id:"password",name:"password",placeholder:"Veuillez créer votre mot de passe",onInput:s[3]||(s[3]=()=>n.checkInput("password"))},null,544),[[o.nr,n.userForm.password]]),J,(0,a._)("span",R,[n.passwordInputValid?((0,a.wg)(),(0,a.iD)("i",X)):((0,a.wg)(),(0,a.iD)("i",Q))])]),n.submitted&&n.v$.password.$error?((0,a.wg)(),(0,a.iD)("div",ee,[n.userForm.password.required?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",se,oe)),n.v$.password.minLength?((0,a.wg)(),(0,a.iD)("span",ae,re)):(0,a.kq)("",!0)])):(0,a.kq)("",!0)]),(0,a._)("div",ie,[le,(0,a._)("div",ue,[(0,a.wy)((0,a._)("input",{class:"input",type:"email","onUpdate:modelValue":s[4]||(s[4]=e=>n.userForm.email=e),onInput:s[5]||(s[5]=(...s)=>e.emailValidInput&&e.emailValidInput(...s)),id:"email",name:"email",placeholder:"Veuillez saisir votre adresse email"},null,544),[[o.nr,n.userForm.email]]),ce]),n.submitted&&n.userForm.email.$error?((0,a.wg)(),(0,a.iD)("div",de,[n.userForm.email.required?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",me,ge)),n.userForm.email.email?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("span",ve,_e))])):(0,a.kq)("",!0)]),he,(0,a._)("div",we,[(0,a._)("p",null,[(0,a.Uk)(" Déjà inscrit ? "),(0,a.Wm)(l,{to:{name:"login"}},{default:(0,a.w5)((()=>[(0,a.Uk)("Se connecter")])),_:1})])])],32)}var be=t(262),ye=t(121),De=JSON.parse('{"N":"http://localhost:3000/api"}'),Ce=t(743),Se=t(705),Ue=t(760),Ie={setup(){const e=(0,_.tv)(),s=(0,be.iH)({username:"",email:"",password:""}),t=(0,Ce.y$C)("user-token",null,sessionStorage),o=(0,Ce.y$C)("user-id",null,sessionStorage),a=(0,Ce.y$C)("user-admin",null,sessionStorage),n=(0,be.iH)(!1),r=(0,be.iH)(!1),i=(0,be.iH)(!1),l=()=>{r.value=s.value.username.length>=3},u=()=>{i.value=s.value.password.length>=8},c=e=>{"username"===e?l():"password"===e&&u()},d={username:{required:Ue.C1,minLength:(0,Ue.Ei)(3)},email:{required:Ue.C1,email:Ue.Do},password:{required:Ue.C1,minLength:(0,Ue.Ei)(8)}},m=(0,Se.Xw)(d,s),p=async()=>{n.value=!0,m.value.$touch(),m.value.$invalid?console.log("Échec de la validation"):ye.Z.post(De.N+"/user/signup/",{username:s.value.username,email:s.value.email,password:s.value.password}).then((s=>{200===s.status||201===s.status?(t.value=s.data.token,o.value=s.data.userId,a.value=s.data.isAdmin,console.log("Informations de l'utilisateur enregistrées dans le stockage de session:"),console.log("user-token:",t.value),console.log("user-id :",o.value),console.log("user-admin:",a.value),e.push("/mainboard")):console.error("Erreur d'envoi de formulaire")})).catch((e=>{console.error("Erreur lors de la soumission du formulaire:",e)}))};return{userForm:s,submitted:n,handleSubmit:p,v$:m,checkInput:c,usernameInputValid:r,passwordInputValid:i}}};const ze=(0,d.Z)(Ie,[["render",ke]]);var $e=ze;const qe=(0,a._)("h1",{class:"title is-2"},"Connexion",-1),Pe={key:0,class:"notification is-danger"},Ee={class:"field"},Ae=(0,a._)("label",{for:"email",class:"label"},"Adresse électronique",-1),He={class:"control has-icons-left has-icons-right"},Ne=(0,a._)("span",{class:"icon is-small is-left"},[(0,a._)("i",{class:"fas fa-envelope"})],-1),Ve={class:"field"},je=(0,a._)("label",{for:"password",class:"label"},"Mot de passe",-1),Be={class:"control has-icons-left"},Fe=(0,a._)("span",{class:"icon is-small is-left"},[(0,a._)("i",{class:"fas fa-key"})],-1),Le=(0,a.uE)('<div class="field is-grouped is-grouped-centered"><div class="control"><button class="button is-link">Soumettre</button></div><div class="control"><a href="/" class="button high_contrast">Annuler</a></div></div>',1);function Te(e,s,t,n,i,l){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("form",{onSubmit:s[2]||(s[2]=(0,o.iM)(((...e)=>n.logValid&&n.logValid(...e)),["prevent"])),class:"form"},[qe,n.loginError?((0,a.wg)(),(0,a.iD)("div",Pe,(0,r.zw)(n.loginError),1)):(0,a.kq)("",!0),(0,a._)("div",Ee,[Ae,(0,a._)("div",He,[(0,a.wy)((0,a._)("input",{class:"input",type:"email","onUpdate:modelValue":s[0]||(s[0]=e=>n.userForm.email=e),id:"email",name:"email",placeholder:"Veuillez saisir votre adresse email"},null,512),[[o.nr,n.userForm.email]]),Ne])]),(0,a._)("div",Ve,[je,(0,a._)("div",Be,[(0,a.wy)((0,a._)("input",{class:"input",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>n.userForm.password=e),id:"password",name:"password",placeholder:"Veuillez saisir votre mot de passe"},null,512),[[o.nr,n.userForm.password]]),Fe])]),Le],32)])}var We={setup(){const e=(0,be.iH)({email:"",password:""}),s=(0,be.iH)(!1),t=(0,be.iH)(null),o=(0,_.tv)(),a={email:{required:Ue.C1,email:Ue.Do},password:{required:Ue.C1,minLength:(0,Ue.Ei)(8)}},n=(0,Se.Xw)(a,e),r=async()=>{if(s.value=!0,n.value.$touch(),!n.value.$invalid)try{const s=await ye.Z.post(De.N+"/user/login/",e.value);200===s.status&&(sessionStorage.setItem("user-token",s.data.token),sessionStorage.setItem("user-id",s.data.userId),sessionStorage.setItem("user-admin",s.data.userAdmin),s.data.imgProfileUrl&&sessionStorage.setItem("imgProfileUrl",s.data.imgProfileUrl),o.push("/mainboard"))}catch(a){console.error("Erreur lors de la connexion:",a),t.value="Erreur lors de la connexion. Veuillez réessayer."}};return{userForm:e,submitted:s,logValid:r,v$:n,loginError:t}}};const Oe=(0,d.Z)(We,[["render",Te]]);var Me=Oe,Ze={name:"HomePage",components:{UserSignup:$e,UserLogin:Me},data(){return{currentComponent:null}},computed:{...(0,P.rn)({societyName:"societyName"})},methods:{goToSignup(){this.currentComponent="UserSignup"},goToLogin(){this.currentComponent="UserLogin"}}};const xe=(0,d.Z)(Ze,[["render",q]]);var Ye=xe,Ke=t.p+"img/icon-left-font-monochrome-white.3302328a.svg";const Ge={class:"navbar",role:"navigation","aria-label":"main navigation"},Je={class:"navbar-brand"},Re=(0,a._)("img",{src:Ke,alt:"groupomania-logo"},null,-1),Xe=(0,a._)("h1",null,"Forum - page principale",-1),Qe={class:"navbar-end"},es={class:"navbar-item"},ss={class:"navbar-item"},ts={class:"navbar-item"},os={class:"navbar-item"},as=(0,a._)("i",{class:"fas fa-sign-out-alt"},null,-1),ns={class:"navbar-end"},rs={class:"navbar-item"},is={class:"navbar-item"},ls={class:"navbar-item"},us=(0,a._)("i",{class:"fas fa-sign-out-alt"},null,-1);function cs(e,s,t,o,n,r){const i=(0,a.up)("router-link"),l=(0,a.up)("Sidebar"),u=(0,a.up)("Burger");return(0,a.wg)(),(0,a.iD)("header",Ge,[(0,a._)("nav",Je,[(0,a.Wm)(i,{to:"/"},{default:(0,a.w5)((()=>[Re,Xe])),_:1})]),1===o.state.userAdmin?((0,a.wg)(),(0,a.j4)(l,{key:0,class:"navbar-menu"},{default:(0,a.w5)((()=>[(0,a._)("ul",Qe,[(0,a._)("li",es,[(0,a.Wm)(i,{to:"/userprofile"},{default:(0,a.w5)((()=>[(0,a.Uk)("Mon profil")])),_:1})]),(0,a._)("li",ss,[(0,a.Wm)(i,{to:"/admin"},{default:(0,a.w5)((()=>[(0,a.Uk)("Espace administrateur ")])),_:1})]),(0,a._)("li",ts,[o.state.userLogged?((0,a.wg)(),(0,a.j4)(i,{key:0,to:"/delete_user"},{default:(0,a.w5)((()=>[(0,a.Uk)("Supprimer le compte ")])),_:1})):(0,a.kq)("",!0)]),(0,a._)("li",os,[o.state.userLogged?((0,a.wg)(),(0,a.iD)("a",{key:0,href:"#",onClick:s[0]||(s[0]=e=>o.logOut())},[as,(0,a.Uk)("Déconnexion ")])):(0,a.kq)("",!0)])])])),_:1})):(0,a.kq)("",!0),0===o.state.userAdmin?((0,a.wg)(),(0,a.j4)(l,{key:1,class:"navbar-menu"},{default:(0,a.w5)((()=>[(0,a._)("ul",ns,[(0,a._)("li",rs,[(0,a.Wm)(i,{to:"/userprofile"},{default:(0,a.w5)((()=>[(0,a.Uk)("Mon profil")])),_:1})]),(0,a._)("li",is,[o.state.userLogged?((0,a.wg)(),(0,a.j4)(i,{key:0,to:"/delete_user"},{default:(0,a.w5)((()=>[(0,a.Uk)("Supprimer le compte ")])),_:1})):(0,a.kq)("",!0)]),(0,a._)("li",ls,[o.state.userLogged?((0,a.wg)(),(0,a.iD)("a",{key:0,href:"#",onClick:s[1]||(s[1]=e=>o.logOut())},[us,(0,a.Uk)("Déconnexion ")])):(0,a.kq)("",!0)])])])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(u,{class:"display_lowres"})])}const ds=(0,a.uE)('<button type="button" class="burger-button" title="Menu"><span class="hidden">Toggle menu</span><span class="burger-bar burger-bar--1"></span><span class="burger-bar burger-bar--2"></span><span class="burger-bar burger-bar--3"></span></button>',1);function ms(e,s,t,n,i,l){return(0,a.wg)(),(0,a.iD)("div",{id:"burger",class:(0,r.C_)({active:l.isBurgerActive}),onClick:s[0]||(s[0]=(0,o.iM)(((...e)=>l.toggle&&l.toggle(...e)),["prevent"]))},[(0,a.WI)(e.$slots,"default",{},(()=>[ds]))],2)}const ps=(0,be.qj)({isNavOpen:!1}),gs={setIsNavOpen(e){ps.isNavOpen=e},toggleNav(){ps.isNavOpen=!ps.isNavOpen}};var vs={computed:{isBurgerActive(){return ps.isNavOpen}},methods:{toggle(){gs.toggleNav()}}};const fs=(0,d.Z)(vs,[["render",ms]]);var _s=fs;const hs={class:"sidebar"},ws={key:0,class:"sidebar-panel"};function ks(e,s,t,n,r,i){return(0,a.wg)(),(0,a.iD)("div",hs,[i.isPanelOpen?((0,a.wg)(),(0,a.iD)("div",{key:0,class:"sidebar-backdrop",onClick:s[0]||(s[0]=(...e)=>i.closeSidebarPanel&&i.closeSidebarPanel(...e))})):(0,a.kq)("",!0),(0,a.Wm)(o.uT,{name:"slide"},{default:(0,a.w5)((()=>[i.isPanelOpen?((0,a.wg)(),(0,a.iD)("div",ws,[(0,a.WI)(e.$slots,"default")])):(0,a.kq)("",!0)])),_:3})])}var bs={methods:{closeSidebarPanel:gs.toggleNav},computed:{isPanelOpen(){return ps.isNavOpen}}};const ys=(0,d.Z)(bs,[["render",ks]]);var Ds=ys,Cs={name:"MainHeader",components:{Burger:_s,Sidebar:Ds},props:{userInfos:{type:String}},setup(){const e=(0,be.qj)({userLogged:null,userAdmin:null});(0,a.bv)((()=>{e.userLogged=sessionStorage.getItem("user-id"),e.userAdmin="1"===sessionStorage.getItem("user-admin")?1:0}));const s=()=>{sessionStorage.clear(),localStorage.clear(),window.location.href="/login"};return{state:e,logOut:s}}};const Ss=(0,d.Z)(Cs,[["render",cs]]);var Us=Ss;const Is={key:0,class:"new-post_form"},zs=(0,a._)("label",{for:"title",class:"new-post_form-label"},"Titre",-1),$s=(0,a._)("label",{for:"message",class:"new-post_form-label"},"Message",-1),qs=(0,a._)("label",{for:"image",class:"new-post_form-label"},"Image",-1),Ps={id:"alert"};function Es(e,s,t,n,i,l){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("button",{onClick:s[0]||(s[0]=e=>i.isHidden=!1),class:"button is-link"}," Créer une nouvelle publication "),(0,a.Wm)(o.uT,{name:"fade"},{default:(0,a.w5)((()=>[i.isHidden?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("form",Is,[(0,a._)("a",{href:"#",class:"new-post_close-button",onClick:s[1]||(s[1]=(0,o.iM)((e=>i.isHidden=!0),["prevent"]))},"×"),zs,(0,a.wy)((0,a._)("input",{id:"title",class:"new-post_form-input",type:"text","onUpdate:modelValue":s[2]||(s[2]=e=>i.title=e),placeholder:"Votre titre ..."},null,512),[[o.nr,i.title]]),$s,(0,a.wy)((0,a._)("input",{id:"message",class:"new-post_form-input",type:"text","onUpdate:modelValue":s[3]||(s[3]=e=>i.content=e),placeholder:"Votre message ..."},null,512),[[o.nr,i.content]]),qs,(0,a._)("input",{id:"Image",class:"new-post_form-file",type:"file",onChange:s[4]||(s[4]=(...e)=>l.onFileSelected&&l.onFileSelected(...e)),placeholder:"upload image"},null,32),(0,a._)("button",{class:"new-post_form-button",onClick:s[5]||(s[5]=(...e)=>l.sendNewContent&&l.sendNewContent(...e))}," Envoyer "),(0,a._)("p",Ps,(0,r.zw)(i.msgError),1)]))])),_:1})])}const As=t(218),Hs=(0,be.iH)(!1);var Ns={name:"NewPost",data(){return{isHidden:!0,title:"",content:"",msgError:"",selectedFile:""}},props:{imgFile:{type:String}},methods:{userLogged(){sessionStorage.getItem("user-token")&&(Hs.value=!0)},onFileSelected(e){this.selectedFile=e.target.files[0]},sendNewContent(e){let s,t=/^[^=*<>{}]+$/;if(this.msgError="",e.preventDefault(),""===this.title||null==this.title?s="Titre requis":this.title.length<3?s="Un minimum de 3 caractères est requis":t.test(this.title)||(s="Les caractères suivants sont interdits: = * < > { }"),""===this.content||null==this.content?s="Contenu requis":this.content.length<3?s="Un minimum de 3 caractères est requis":t.test(this.content)||(s="Les caractères suivants sont interdits: = * < > { }"),s)this.msgError=s;else{const e=new FormData;void 0!==this.selectedFile&&e.append("image",this.selectedFile),e.append("title",this.title),e.append("content",this.content),e.append("UserId",sessionStorage.getItem("user-id")),console.log(...e),As({headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"post",url:De.N+"/post/newpost/",data:e}).then((e=>{if(console.log(e),201===e.status)return document.location.reload(),e;throw s=e})).catch((e=>{console.log(e),this.msgError=e.response.data.error}))}}},mounted(){this.userLogged()}};const Vs=(0,d.Z)(Ns,[["render",Es]]);var js=Vs;const Bs={class:"post post_link"},Fs={class:"post_name"},Ls=(0,a._)("i",{class:"fas fa-user-circle"},null,-1),Ts={class:"post_main"},Ws=["src"],Os={key:0},Ms=2;var Zs={__name:"AllPosts",setup(e){const s=(0,be.iH)([]),t=(0,be.iH)(0);let o=(0,be.iH)(!1);const n={headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")}},i=async()=>{if(!(t.value>=50)){o.value=!0;try{const e=await ye.Z.get(`${De.N}/post?limit=${Ms}&offset=${t.value}`,n);Array.isArray(e.data)?(s.value=[...s.value,...e.data],t.value+=e.data.length):console.error("Format de réponse inattendu:",e.data)}catch(e){console.error("Erreur lors de la récupération des posts:",e)}finally{o.value=!1}}},l=()=>{const e=document.documentElement.scrollHeight-window.innerHeight,s=window.scrollY,a=e-s<5;a&&!o.value&&t.value<50&&i()};return(0,a.bv)((()=>{window.addEventListener("scroll",l),i()})),(0,a.Ah)((()=>{window.removeEventListener("scroll",l)})),(e,t)=>{const n=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)("div",{class:"post_container",onScroll:l},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.value,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"dashboard-Items",key:e.id},[(0,a.Wm)(n,{to:{name:"onepost",params:{id:e.id}},class:"underline-disable"},{default:(0,a.w5)((()=>[(0,a._)("div",Bs,[(0,a._)("div",Fs,[Ls,(0,a._)("p",null,(0,r.zw)(e.User?e.User.username:"Utilisateur inconnu"),1)]),(0,a._)("div",Ts,[(0,a._)("p",null,(0,r.zw)(e.title),1),(0,a._)("p",null,(0,r.zw)(e.content),1),e.imgFile?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.imgFile,alt:"Image du post"},null,8,Ws)):(0,a.kq)("",!0)])])])),_:2},1032,["to"])])))),128)),(0,be.SU)(o)?((0,a.wg)(),(0,a.iD)("div",Os,"Chargement...")):(0,a.kq)("",!0)],32)}}};const xs=Zs;var Ys=xs,Ks=t(542);const Gs=e=>((0,a.dD)("data-v-aa269670"),e=e(),(0,a.Cn)(),e),Js={class:"mainboard"},Rs={class:"welcome_msg"},Xs={key:0},Qs=Gs((()=>(0,a._)("p",null,"Utilisateur non autorisé",-1))),et=[Qs],st={key:1},tt=Gs((()=>(0,a._)("hr",{class:"welcome_msg-separate"},null,-1))),ot={class:"dashboard-title"},at=Gs((()=>(0,a._)("template",null,[(0,a._)("p",{class:"no_post"},"Aucun post à afficher")],-1)));var nt={__name:"MainBoard",setup(e){const s=(0,be.iH)(""),t=(0,be.iH)([]),o=(0,be.iH)(!1),n=(0,Ce.y$C)("user-token",null,sessionStorage),i=(0,Ce.y$C)("user-id",null,sessionStorage),l=async()=>{if(console.log("user-id:",i.value),!i.value)return console.error("ID utilisateur non disponible"),void(o.value=!1);try{const e=await ye.Z.get(`${De.N}/user/${i.value}`,{headers:{Authorization:`Bearer ${n.value}`}});200===e.status?(s.value=e.data.username,o.value=!0,console.log("Nom d'utilisateur enregistré:",s.value)):console.error("Erreur lors de la récupération des informations de l'utilisateur")}catch(e){console.error("Erreur lors de la récupération des informations de l'utilisateur:",e),o.value=!1}};(0,a.bv)((async()=>{await l(),u()}));const u=async()=>{try{const e=await ye.Z.get(`${De.N}/post/`,{headers:{Authorization:`Bearer ${n.value}`}});t.value=e.data}catch(e){console.error("Erreur lors de la récupération des posts:",e)}};return(e,n)=>((0,a.wg)(),(0,a.iD)("div",Js,[(0,a.Wm)(Us),(0,a._)("div",Rs,[o.value?((0,a.wg)(),(0,a.iD)("div",st,[(0,a._)("span",null,[(0,a.Uk)("Bonjour "),(0,a._)("b",null,(0,r.zw)(s.value),1),(0,a.Uk)(" !")]),tt,(0,a.Wm)(js)])):((0,a.wg)(),(0,a.iD)("div",Xs,et))]),t.value||t.value.value?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("h2",ot,[(0,a.Wm)((0,be.SU)(Ks.JO),{icon:"fluent:news-20-regular",color:"white",width:"30",height:"30"}),(0,a.Uk)("Consultez les publications récentes ")]),(0,a.Wm)(Ys)],64)):(0,a.kq)("",!0),at]))}};const rt=(0,d.Z)(nt,[["__scopeId","data-v-aa269670"]]);var it=rt;const lt=e=>((0,a.dD)("data-v-247e3eb8"),e=e(),(0,a.Cn)(),e),ut={class:"userlogged-container"},ct={key:0},dt=lt((()=>(0,a._)("p",null,"Accès non autorisé",-1))),mt=[dt],pt={key:1,class:"userlogged-msg"},gt={class:"userlogged-msg_img"},vt=["src"],ft={class:"field"},_t=lt((()=>(0,a._)("label",{for:"newUsername",class:"label"},"Nouveau nom d'utilisateur",-1))),ht={class:"control"},wt={class:"field"},kt=lt((()=>(0,a._)("label",{for:"profilePic",class:"label"},"Photo de profil",-1))),bt={class:"control"},yt=lt((()=>(0,a._)("div",{id:"fileNameDisplay"},null,-1))),Dt=lt((()=>(0,a._)("div",{class:"field"},[(0,a._)("div",{class:"control"},[(0,a._)("button",{class:"button is-info"},"Mettre à jour")])],-1)));function Ct(e,s,t,n,i,l){const u=(0,a.up)("MainHeader");return(0,a.wg)(),(0,a.iD)("div",ut,[(0,a.Wm)(u),n.userLogged?((0,a.wg)(),(0,a.iD)("div",pt,[(0,a._)("span",null,[(0,a.Uk)("Vous êtes connecté en tant que "),(0,a._)("b",null,(0,r.zw)(n.userLogged.username),1)]),(0,a._)("div",gt,[(0,a._)("img",{src:n.userLogged.imgProfile,alt:"Photo de profil"},null,8,vt)]),(0,a._)("form",{onSubmit:s[2]||(s[2]=(0,o.iM)(((...e)=>n.updateUserProfile&&n.updateUserProfile(...e)),["prevent"])),class:"userlogged-msg_form"},[(0,a._)("div",ft,[_t,(0,a._)("div",ht,[(0,a.wy)((0,a._)("input",{class:"input",type:"text","onUpdate:modelValue":s[0]||(s[0]=e=>n.newUsername=e),id:"newUsername",placeholder:"Entrez votre nouveau nom d'utilisateur"},null,512),[[o.nr,n.newUsername]])])]),(0,a._)("div",wt,[kt,(0,a._)("div",bt,[(0,a._)("input",{type:"file",id:"profilePic",onChange:s[1]||(s[1]=(...e)=>n.onFileChange&&n.onFileChange(...e))},null,32),yt])]),Dt],32)])):((0,a.wg)(),(0,a.iD)("div",ct,mt))])}var St={components:{MainHeader:Us},setup(){const e=(0,be.iH)({username:"",imgProfile:""}),s=(0,Ce.y$C)("user-token",null,sessionStorage),t=(0,Ce.y$C)("user-id",null,sessionStorage),o=(0,be.iH)(""),n=(0,be.iH)(null),r=async()=>{if(console.log("user-id:",t.value),t.value)try{const o=await ye.Z.get(`${De.N}/user/${t.value}`,{headers:{Authorization:`Bearer ${s.value}`}});200===o.status?(e.value.username=o.data.username,console.log("Nom d'utilisateur enregistré:",e.value.username)):console.error("Erreur lors de la récupération des informations de l'utilisateur")}catch(o){console.error("Erreur lors de la récupération des informations de l'utilisateur:",o)}else console.error("ID utilisateur non disponible")},i=e=>{n.value=e.target.files[0]},l=async()=>{const a=new FormData;o.value&&a.append("username",o.value),n.value&&a.append("image",n.value);try{const n=await ye.Z.put(`${De.N}/user/update/${t.value}`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s.value}`}});200===n.status?(console.log("Profil mis à jour avec succès"),o.value&&(e.value.username=o.value),n.data.imgProfileUrl&&(e.value.imgProfile=n.data.imgProfileUrl,sessionStorage.setItem("imgProfileUrl",e.value.imgProfile))):console.error("Erreur lors de la mise à jour du profil")}catch(r){console.error("Erreur lors de la mise à jour du profil:",r)}};return(0,a.bv)((async()=>{await r();const s=sessionStorage.getItem("imgProfileUrl");s&&(e.value.imgProfile=s)})),{userLogged:e,displayUserLogged:r,newUsername:o,updateUserProfile:l,onFileChange:i}}};const Ut=(0,d.Z)(St,[["render",Ct],["__scopeId","data-v-247e3eb8"]]);var It=Ut;const zt={key:0,class:"unauthorizedMessage"},$t=(0,a._)("p",null,"Acces non authorisé",-1),qt=[$t],Pt={key:1,class:"adminPage"},Et={class:"users-list"},At=(0,a._)("h2",{class:"users-list_heading"},"Liste des utilisateurs",-1),Ht={class:"users-list_name"},Nt=["onClick"],Vt=(0,a._)("i",{class:"fas fa-file-alt"},null,-1),jt=["onClick"],Bt=(0,a._)("i",{class:"fas fa-comment-alt"},null,-1),Ft=["onClick"],Lt={class:"users-content"},Tt={key:0,class:"users-posts"},Wt=(0,a._)("h2",{class:"users-posts_title"},"Dernières publications",-1),Ot={key:0},Mt={class:"users-posts_id"},Zt={class:"users-posts_image"},xt=["src"],Yt=["onClick"],Kt={key:1,class:"users-comments"},Gt=(0,a._)("h2",{class:"users-comments_title"},"Derniers commentaires",-1),Jt={key:0},Rt={key:1},Xt={class:"users-comments_id"},Qt=["onClick"],eo=(0,a._)("button",{class:"button is-link"},[(0,a._)("a",{href:"http://localhost:8080/groupomania/#/mainboard",class:"backlink"},[(0,a._)("i",{class:"far fa-arrow-alt-circle-left backlink_icon"},"Page précédente")])],-1);function so(e,s,t,o,n,i){const l=(0,a.up)("MainHeader"),u=(0,a.up)("confirm-dialogue");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(l),n.allUsers.length<1?((0,a.wg)(),(0,a.iD)("div",zt,qt)):(0,a.kq)("",!0),n.allUsers.length>1?((0,a.wg)(),(0,a.iD)("div",Pt,[(0,a._)("section",Et,[At,(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.allUsers,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,class:"users-list_items"},[(0,a._)("p",Ht,(0,r.zw)(e.username),1),(0,a._)("a",{href:"#/admin",onClick:s=>i.displayUserPosts(e.id)},[Vt,(0,a.Uk)("Publications ")],8,Nt),(0,a._)("a",{href:"#/admin",onClick:s=>i.displayUserComments(e.id)},[Bt,(0,a.Uk)("Commentaires ")],8,jt),(0,a._)("button",{href:"#/admin",onClick:s=>i.userDelete(e.id),class:"users-list_delete-link"}," Supprimer l'utilisateur ",8,Ft)])))),128)),(0,a.Wm)(u,{ref:"confirmDialogue"},null,512)])]),(0,a._)("section",Lt,[n.posts?((0,a.wg)(),(0,a.iD)("div",Tt,[Wt,n.posts.length<1?((0,a.wg)(),(0,a.iD)("p",Ot,"Aucune publication")):(0,a.kq)("",!0),(0,a._)("ul",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.posts,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,class:"users-posts_items"},[(0,a._)("p",Mt," posté le "+(0,r.zw)(e.updatedAt.slice(0,10)),1),(0,a._)("p",null,"Titre : "+(0,r.zw)(e.title),1),(0,a._)("p",null,"Contenu : "+(0,r.zw)(e.content),1),(0,a._)("p",Zt,[e.imgFile?((0,a.wg)(),(0,a.iD)("img",{key:0,src:e.imgFile,alt:"image-illustration"},null,8,xt)):(0,a.kq)("",!0)]),(0,a._)("button",{href:"#/admin",onClick:s=>i.postDelete(e.id,e.UserId),class:"users-posts_delete-link"}," Supprimer ",8,Yt)])))),128))])])):(0,a.kq)("",!0),n.comments?((0,a.wg)(),(0,a.iD)("div",Kt,[Gt,n.comments.length<1?((0,a.wg)(),(0,a.iD)("p",Jt,"Aucun commentaire")):((0,a.wg)(),(0,a.iD)("ul",Rt,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.comments,(e=>((0,a.wg)(),(0,a.iD)("li",{key:e.id,class:"users-comments_items"},[(0,a._)("p",Xt," Posté le "+(0,r.zw)(e.updatedAt.slice(0,10)),1),(0,a._)("p",null,"Contenu : "+(0,r.zw)(e.content),1),(0,a._)("p",null,[(0,a._)("button",{href:"#/admin",class:"users-comments_delete-link",onClick:s=>i.commentDelete(e.id,e.UserId)}," supprimer ",8,Qt)])])))),128)),(0,a.Wm)(u,{ref:"confirmDialogue"},null,512)]))])):(0,a.kq)("",!0)])])):(0,a.kq)("",!0),eo])}const to={style:{"margin-top":"0"}},oo={class:"btns"};function ao(e,s,t,o,n,i){const l=(0,a.up)("popup-modal");return(0,a.wg)(),(0,a.j4)(l,{ref:"popup"},{default:(0,a.w5)((()=>[(0,a._)("h2",to,(0,r.zw)(e.title),1),(0,a._)("p",null,(0,r.zw)(e.message),1),(0,a._)("div",oo,[(0,a._)("button",{class:"cancel-btn",onClick:s[0]||(s[0]=(...e)=>i._cancel&&i._cancel(...e))},(0,r.zw)(e.cancelButton),1),(0,a._)("span",{class:"ok-btn",onClick:s[1]||(s[1]=(...e)=>i._confirm&&i._confirm(...e))},(0,r.zw)(e.okButton),1)])])),_:1},512)}const no={key:0,class:"popup-modal"},ro={class:"window"};function io(e,s,t,n,r,i){return(0,a.wg)(),(0,a.j4)(o.uT,{name:"fade"},{default:(0,a.w5)((()=>[e.isVisible?((0,a.wg)(),(0,a.iD)("div",no,[(0,a._)("div",ro,[(0,a.WI)(e.$slots,"default",{},void 0,!0)])])):(0,a.kq)("",!0)])),_:3})}var lo={name:"PopupModal",data:()=>({isVisible:!1}),methods:{open(){this.isVisible=!0},close(){this.isVisible=!1}}};const uo=(0,d.Z)(lo,[["render",io],["__scopeId","data-v-a183842e"]]);var co=uo,mo={name:"ConfirmDialogue",components:{PopupModal:co},data:()=>({title:void 0,message:void 0,okButton:void 0,cancelButton:"Revenir en arrière",resolvePromise:void 0,rejectPromise:void 0}),methods:{show(e={}){return this.title=e.title,this.message=e.message,this.okButton=e.okButton,e.cancelButton&&(this.cancelButton=e.cancelButton),this.$refs.popup.open(),new Promise(((e,s)=>{this.resolvePromise=e,this.rejectPromise=s}))},_confirm(){this.$refs.popup.close(),this.resolvePromise(!0)},_cancel(){this.$refs.popup.close(),this.resolvePromise(!1)}}};const po=(0,d.Z)(mo,[["render",ao],["__scopeId","data-v-8e7251d6"]]);var go=po;const vo=t(218);var fo={name:"AdminComponent",components:{MainHeader:Us,ConfirmDialogue:go},data(){return{allUsers:[],userComment:[],posts:"",comments:""}},methods:{displayAllUsers(){const e={headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")}};vo.get(De.N+"/user/",e).then((e=>{this.allUsers=e.data})).catch((e=>console.log(e)))},displayUserPosts(e){vo({headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"GET",url:De.N+"/post/user/"+e}).then((e=>{this.posts=e.data})).catch((e=>console.log(e)))},displayUserComments(e){vo({headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"GET",url:De.N+"/comment/user/"+e}).then((e=>{this.comments=e.data,this.posts=""})).catch((e=>console.log(e)))},userDelete(e){confirm("Voulez-vous vraiment supprimer cet utilisateur ?")&&vo({headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"delete",url:De.N+"/user/delete/"+e}).then((()=>{this.$router.go()})).catch((e=>console.log(e)))},async postDelete(e){const s=await this.$refs.confirmDialogue.show({title:"Suppression d'une publication",message:"Voulez-vous vraiment supprimer cette publication ?  Vous ne pourrez pas revenir en arrière !",okButton:"Supprimer définitivement"});s&&vo({headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"delete",url:De.N+"/post/admin/"+e}).then((()=>{this.$router.go()})).catch((e=>console.log(e)))},async commentDelete(e){const s=await this.$refs.confirmDialogue.show({title:"Suppression d'un commentaire",message:"Voulez-vous vraiment supprimer ce commentaire ?  Vous ne pourrez pas revenir en arrière !",_okButton:"Supprimer définitivement",get okButton(){return this._okButton},set okButton(e){this._okButton=e}});s&&vo({headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"delete",url:De.N+"/comment/admin/"+e}).then((()=>{this.$router.go()})).catch((e=>console.log(e)))}},mounted(){this.displayAllUsers(),this.displayUserPosts(),this.displayUserComments()}};const _o=(0,d.Z)(fo,[["render",so]]);var ho=_o;const wo={key:0},ko=(0,a._)("p",null,"Acces non authorisé",-1),bo=[ko],yo={key:1,class:"form form_display"},Do=(0,a._)("h2",{class:"title is-2"},"Supprimer mon compte",-1),Co={class:"field"},So=(0,a._)("label",{for:"mail",class:"label"},"Adresse email",-1),Uo={class:"field"},Io=(0,a._)("label",{for:"password",class:"label"},"Mot de passe",-1),zo={id:"delete_alert"},$o=(0,a._)("button",{class:"button is-link"},[(0,a._)("a",{href:"http://localhost:8080/groupomania/#/mainboard"},[(0,a._)("i",{class:"far fa-arrow-alt-circle-left backlink_icon"},"Page précédente")])],-1);function qo(e,s,t,n,i,l){const u=(0,a.up)("MainHeader"),c=(0,a.up)("ConfirmDialogue");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(u),n.userLogged?((0,a.wg)(),(0,a.iD)("form",yo,[Do,(0,a._)("div",Co,[So,(0,a.wy)((0,a._)("input",{id:"mail",class:"input",type:"email","onUpdate:modelValue":s[0]||(s[0]=e=>n.email=e),placeholder:"Entrez l'adresse email de votre compte"},null,512),[[o.nr,n.email]])]),(0,a._)("div",Uo,[Io,(0,a.wy)((0,a._)("input",{id:"password",class:"input",type:"password","onUpdate:modelValue":s[1]||(s[1]=e=>n.password=e),placeholder:"Mot de passe actuel"},null,512),[[o.nr,n.password]])]),(0,a._)("button",{class:"delete-btn",onClick:s[2]||(s[2]=(0,o.iM)(((...e)=>n.confirmUserDelete&&n.confirmUserDelete(...e)),["prevent"]))}," Confirmation de suppression "),(0,a._)("p",zo,(0,r.zw)(n.msgError),1),(0,a.Wm)(c,{ref:"confirmDialogue"},null,512)])):((0,a.wg)(),(0,a.iD)("div",wo,bo)),$o])}var Po={components:{MainHeader:Us,ConfirmDialogue:go},name:"DeleteUser",setup(){const e=(0,be.iH)(sessionStorage.getItem("user-token")),s=(0,be.iH)(sessionStorage.getItem("user-id")),t=(0,be.iH)("1"===sessionStorage.getItem("user-admin")),o=(0,be.iH)(null),a=(0,_.tv)(),n=(0,be.iH)(""),r=(0,be.iH)(""),i=(0,be.iH)(""),l=(0,be.iH)(null!==s.value),u=async()=>{console.log("Ouverture du dialogue de confirmation");const e=await o.value.show({title:"Suppression du compte",message:"Voulez-vous vraiment supprimer votre compte ? Cette action est irréversible !",okButton:"Supprimer définitivement"});if(console.log("Choix de l'utilisateur:",e),e)try{console.log("Envoi de la requête de suppression");const e={email:n.value,password:r.value};await ye.Z.delete(`${De.N}/user/delete`,{data:e,headers:{Authorization:`Bearer ${sessionStorage.getItem("user-token")}`}}),sessionStorage.clear(),a.push("/login")}catch(s){console.error("Erreur lors de la suppression du compte:",s)}};return{email:n,password:r,userLogged:l,msgError:i,confirmUserDelete:u,confirmDialogue:o,userToken:e,userId:s,userAdmin:t}}};const Eo=(0,d.Z)(Po,[["render",qo]]);var Ao=Eo;const Ho=e=>((0,a.dD)("data-v-ee7e3388"),e=e(),(0,a.Cn)(),e),No={class:"post_comments"},Vo=Ho((()=>(0,a._)("div",{class:"post_comments_title"},[(0,a._)("i",{class:"far fa-comment-alt"}),(0,a._)("p",null,"Commentaires")],-1))),jo={class:"post_comments_list"},Bo={class:"post_comment_name"},Fo=Ho((()=>(0,a._)("i",{class:"fas fa-user-circle"},null,-1))),Lo={class:"post_comment-text-container"},To={class:"post_comment_content"},Wo=["onClick"],Oo={type:"submit",class:"submit-icon"},Mo={key:0};var Zo={__name:"CommentItem",props:{postId:Number,commentsProp:Array,userLoggedId:Number},emits:["comment-added","comment-deleted"],setup(e,{emit:s}){const t=e,n=s,i=(0,be.iH)(""),l=(0,be.iH)(""),u=async()=>{let e,s=/^[^=*<>{}]+$/;if(l.value="",""===i.value||null==i.value?e="Vous devez écrire quelque chose !":s.test(i.value)||(e="Les caractères suivants sont interdits: = * < > { }"),e)l.value=e;else try{const e=await ye.Z.post(`${De.N}/comment/new/`,{UserId:sessionStorage.getItem("user-id"),content:i.value,PostId:t.postId},{headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")}});if(201!==e.status)throw new Error("Erreur lors de l’envoi du commentaire");i.value="",n("comment-added",e.data)}catch(e){l.value=e.response?.data?.error||e.message}},c=async e=>{try{await ye.Z.delete(`${De.N}/comment/${e}`,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")}}),n("comment-deleted",e)}catch(s){console.error("Erreur lors de la suppression du commentaire:",s)}};return(s,t)=>{const n=(0,a.up)("v-tooltip"),d=(0,a.up)("v-textarea");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",No,[Vo,(0,a._)("div",jo,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.commentsProp,(s=>((0,a.wg)(),(0,a.iD)("div",{key:s.id,class:"post_comment"},[(0,a._)("div",Bo,[Fo,(0,a._)("p",null,(0,r.zw)(s.User?s.User.username:"Utilisateur inconnu"),1)]),(0,a._)("div",Lo,[(0,a._)("p",To,(0,r.zw)(s.content),1),s.UserId===e.userLoggedId?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:e=>c(s.id)},[(0,a.Wm)((0,be.SU)(Ks.JO),{icon:"ph:dots-three",width:"32",height:"32"}),(0,a.Wm)(n,{activator:"parent",location:"bottom"},{default:(0,a.w5)((()=>[(0,a.Uk)("Supprimer le commentaire")])),_:1})],8,Wo)):(0,a.kq)("",!0)])])))),128))])]),(0,a._)("form",{onSubmit:(0,o.iM)(u,["prevent"]),class:"comment-form"},[(0,a.Wm)(d,{clearable:"",label:"Ajoutez un commentaire",variant:"outlined",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),placeholder:"écrivez quelquechose...",class:"post_comment_input"},null,8,["modelValue"]),(0,a._)("button",Oo,[(0,a.Wm)((0,be.SU)(Ks.JO),{icon:"wpf:paperplane"}),(0,a.Wm)(n,{activator:"parent",location:"start"},{default:(0,a.w5)((()=>[(0,a.Uk)("envoyer")])),_:1})]),l.value?((0,a.wg)(),(0,a.iD)("p",Mo,(0,r.zw)(l.value),1)):(0,a.kq)("",!0)],32)])}}};const xo=(0,d.Z)(Zo,[["__scopeId","data-v-ee7e3388"]]);var Yo=xo;const Ko=e=>((0,a.dD)("data-v-539a936d"),e=e(),(0,a.Cn)(),e),Go={key:0,class:"post_container"},Jo={class:"dashboard-Items"},Ro={id:"post",class:"post"},Xo={class:"post_name"},Qo=Ko((()=>(0,a._)("i",{class:"fas fa-user-circle"},null,-1))),ea={class:"post_main"},sa={id:"post_title",class:"post_title"},ta={id:"post_content",class:"post_content"},oa=["src"],aa={class:"buttons-container"},na={class:"back-btn"},ra={key:1},ia=Ko((()=>(0,a._)("p",null,"Post non trouvé ou erreur lors du chargement du post.",-1))),la=[ia];var ua={__name:"OnePost",setup(e){const s=(0,be.iH)(null),t=(0,be.iH)(null),o=(0,_.tv)(),n=(0,_.yj)(),i=n.params.id,l=sessionStorage.getItem("user-id"),u={headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")}},c=e=>{s.value&&s.value.Comments&&s.value.Comments.push(e)},d=e=>{s.value&&s.value.Comments&&(s.value.Comments=s.value.Comments.filter((s=>s.id!==e)))},m=async e=>{try{const t=await ye.Z.get(De.N+`/post/${e}`,u);s.value=t.data}catch(t){console.error("Erreur lors de la récupération du post:",t)}},p=async e=>{const s=await t.value.show({title:"Suppression du post",message:"Voulez-vous vraiment supprimer cette publication ? Vous ne pourrez pas revenir en arrière !",okButton:"Supprimer définitivement"});if(s)try{await ye.Z.delete(`${De.N}/post/${e}`,u),o.push("/mainboard")}catch(a){console.error("Erreur lors de la suppression du post:",a)}};return(0,a.bv)((async()=>{i&&await m(i)})),(e,o)=>{const n=(0,a.up)("router-link");return s.value?((0,a.wg)(),(0,a.iD)("div",Go,[(0,a.Wm)(Us),(0,a._)("div",Jo,[(0,a._)("div",Ro,[(0,a._)("div",Xo,[Qo,(0,a._)("p",null,(0,r.zw)(s.value.User?s.value.User.username:"Utilisateur inconnu"),1)]),(0,a._)("div",ea,[(0,a._)("p",sa,(0,r.zw)(s.value.title),1),(0,a._)("p",ta,(0,r.zw)(s.value.content),1),s.value.imgFile?((0,a.wg)(),(0,a.iD)("img",{key:0,src:s.value.imgFile,alt:"Image du post"},null,8,oa)):(0,a.kq)("",!0)]),(0,a.Wm)(Yo,{postId:s.value.id,"comments-prop":s.value.Comments,"user-logged-id":(0,be.SU)(l)?parseInt((0,be.SU)(l)):0,onCommentAdded:c,onCommentDeleted:d},null,8,["postId","comments-prop","user-logged-id"]),(0,a._)("div",aa,[(0,a.Wm)(n,{to:"/mainboard",class:"underline-disable"},{default:(0,a.w5)((()=>[(0,a._)("button",na,[(0,a.Wm)((0,be.SU)(Ks.JO),{icon:"fontisto:arrow-return-left",color:"white"}),(0,a.Uk)("retour ")])])),_:1}),(0,be.SU)(l)==s.value.UserId?((0,a.wg)(),(0,a.iD)("button",{key:0,onClick:o[0]||(o[0]=e=>p(s.value.id)),class:"delete-btn"}," supprimer ")):(0,a.kq)("",!0)])])]),(0,a.Wm)(go,{ref_key:"confirmDialogue",ref:t},null,512)])):((0,a.wg)(),(0,a.iD)("div",ra,la))}}};const ca=(0,d.Z)(ua,[["__scopeId","data-v-539a936d"]]);var da=ca;const ma=[{path:"/",name:"Home",component:Ye},{path:"/login",name:"login",component:Me},{path:"/signup",name:"signup",component:$e},{path:"/mainboard",name:"mainboard",component:it},{path:"/userprofile",name:"userprofile",component:It},{path:"/admin",name:"admin",component:ho},{path:"/delete_user",name:"delete_user",component:Ao},{path:"/allposts",name:"allposts",component:Ys},{path:"/onepost/:id",name:"onepost",component:da}],pa=(0,_.p7)({history:(0,_.PO)(),routes:ma});var ga=pa,va=(0,P.MT)({state:{societyName:"Groupomania",messageContent:null},mutations:{SET_MESSAGE_CONTENT(e,s){e.messageContent=s}},actions:{emailValidInput(e,s){const t=/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/;return t.test(s)},usernameValidInput(e,s){const t=/^[^=*'<>{}0-9]{3,}$/;return t.test(s)},async dashboardLoading({commit:e}){try{const s=await(0,ye.Z)({headers:{"Content-Type":"application/json",Authorization:"Bearer "+sessionStorage.getItem("user-token")},method:"get",url:"https://localhost:3000/api/post/"});console.log("Bienvenue sur le forum !"),e("SET_MESSAGE_CONTENT",s.data)}catch(s){console.error(s)}}},modules:{}}),fa=(t(773),t(291)),_a=t(335),ha=t(300);const wa=(0,fa.Rd)({components:_a,directives:ha}),ka=(0,o.ri)(f);ka.use(ga),ka.use(va),ka.use(wa),ka.config.globalProperties.$http=ye.Z,ka.mount("#app")}},s={};function t(o){var a=s[o];if(void 0!==a)return a.exports;var n=s[o]={exports:{}};return e[o](n,n.exports,t),n.exports}t.m=e,function(){var e=[];t.O=function(s,o,a,n){if(!o){var r=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],n=e[c][2];for(var i=!0,l=0;l<o.length;l++)(!1&n||r>=n)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(i=!1,n<r&&(r=n));if(i){e.splice(c--,1);var u=a();void 0!==u&&(s=u)}}return s}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,a,n]}}(),function(){t.d=function(e,s){for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={143:0};t.O.j=function(s){return 0===e[s]};var s=function(s,o){var a,n,r=o[0],i=o[1],l=o[2],u=0;if(r.some((function(s){return 0!==e[s]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(l)var c=l(t)}for(s&&s(o);u<r.length;u++)n=r[u],t.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return t.O(c)},o=self["webpackChunkgroupomania"]=self["webpackChunkgroupomania"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=t.O(void 0,[998],(function(){return t(785)}));o=t.O(o)})();
//# sourceMappingURL=app.0ff6c6ec.js.map